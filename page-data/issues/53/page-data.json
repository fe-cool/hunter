{
    "componentChunkName": "component---src-templates-issues-tsx",
    "path": "/issues/53",
    "result": {"data":{"issuesJson":{"id":"9ad37918-45f3-51eb-86ee-6ba80fa3b491","title":"å®ç°ç›¸å¯¹å®Œå¤‡çš„æ·±æ‹·è´æ–¹æ³•","number":53,"bodyHTML":"\n<h3 dir=\"auto\">è¦å®ç°çš„åŠŸèƒ½</h3>\n\n<p dir=\"auto\">å®ç°ä¸€ä¸ªæ·±æ‹·è´æ–¹æ³•ï¼Œç‰¹åˆ«æ³¨æ„éœ€è¦æ”¯æŒå¦‚ä¸‹æ•°æ®ç»“æ„ï¼š</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">æ”¯æŒ<code class=\"notranslate\">Date</code></p>\n</li>\n<li>\n<p dir=\"auto\">æ”¯æŒ<code class=\"notranslate\">Symbol</code></p>\n</li>\n<li>\n<p dir=\"auto\">æ”¯æŒ<code class=\"notranslate\">Function</code></p>\n</li>\n<li>\n<p dir=\"auto\">æ”¯æŒ<code class=\"notranslate\">RegExp</code></p>\n</li>\n<li>\n<p dir=\"auto\">å¯¹äº<strong>ç¯çŠ¶å¼•ç”¨</strong>ä¸ä¼šæŠ¥é”™</p>\n</li>\n</ul>\n<p dir=\"auto\"><strong>ç¯çŠ¶å¼•ç”¨</strong>å‚è€ƒå¦‚ä¸‹æ•°æ®ç»“æ„ï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const a = {};\na.a = a;\"><pre class=\"notranslate\"><span class=\"pl-k\">const</span> <span class=\"pl-s1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-s1\">a</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">a</span><span class=\"pl-kos\">;</span></pre></div>\n<h3 dir=\"auto\">ä»£ç ç¤ºä¾‹</h3>\n\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function deepClone(obj) {\n // ...å®ç°\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n <span class=\"pl-c\">// ...å®ç°</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<h3 dir=\"auto\">æœ€ä½³ç­”æ¡ˆè¯„é€‰æ ‡å‡†</h3>\n \n<ol dir=\"auto\">\n<li>è¯·å†™å‡ºå®ç°æ€è·¯ã€ä»£ç ï¼Œå¹¶ä¸ºä»£ç çš„å…³é”®æ­¥éª¤å¢å†™æ³¨é‡Š</li>\n<li>é™„å¸¦æµ‹è¯•ç”¨ä¾‹æ˜¯åŠ åˆ†é¡¹</li>\n<li>ä¸éœ€è¦è€ƒè™‘å¼‚å¸¸å‘ç”Ÿ</li>\n<li>ä¸è¿‡åº¦è®¾è®¡ï¼Œä»£ç ç®€æ´ä¼˜é›…æ˜¯åŠ åˆ†é¡¹</li>\n</ol>\n<h2 dir=\"auto\">æœ€ä½³ç­”æ¡ˆ</h2>\n<p dir=\"auto\"><a href=\"https://github.com/BetaSu/fe-hunter/issues/53#issuecomment-1092382804\" data-hovercard-type=\"issue\" data-hovercard-url=\"/BetaSu/fe-hunter/issues/53/hovercard\">Chorerçš„å›ç­”</a></p>\n<h3 dir=\"auto\">ç­”é¢˜åŒå­¦é¡»çŸ¥</h3>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">ç­”é¢˜è§„èŒƒï¼šè¯·åœ¨<code class=\"notranslate\">ä¸€æ¬¡è¯„è®º</code>ä¸­å®Œæˆä½œç­”ï¼Œåç»­ä¿®æ”¹ä¹Ÿè¯·ç¼–è¾‘è¯¥è¯„è®ºï¼Œè€Œä¸æ˜¯è¿½åŠ æ–°çš„è¯„è®º</p>\n</li>\n<li>\n<p dir=\"auto\">è¯„é€‰æ ‡å‡†ï¼šæœ€ä½³ç­”æ¡ˆç”±<code class=\"notranslate\">å›´è§‚åŒå­¦</code>çš„ <g-emoji class=\"g-emoji\" alias=\"+1\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png\">ğŸ‘</g-emoji> å’Œ<a href=\"https://github.com/BetaSu\">å¡é¢‚</a>å…±åŒå†³å®š</p>\n</li>\n<li>\n<p dir=\"auto\">è¯„é€‰æ—¶é—´ï¼šä¸€èˆ¬æ˜¯é—®é¢˜å‘å¸ƒ24å°æ—¶åè¯„é€‰ï¼Œå¦‚æœé—®é¢˜å‘å¸ƒå½“å¤©å›ç­”æ•°è¾ƒå°‘ï¼Œé—®é¢˜æ‚¬èµé‡‘é¢å¯èƒ½å¢åŠ ï¼ŒåŒæ—¶æ‚¬èµæ—¶é—´ä¹Ÿä¼šå¢åŠ </p>\n</li>\n</ul>\n<h3 dir=\"auto\">å›´è§‚åŒå­¦é¡»çŸ¥</h3>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">å¯¹äºä½ æ»¡æ„çš„ç­”æ¡ˆï¼Œè¯·ä¸è¦åæƒœä½ çš„ <g-emoji class=\"g-emoji\" alias=\"+1\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png\">ğŸ‘</g-emoji>ï¼Œè¿™æ˜¯è¯„é€‰<strong>æœ€ä½³ç­”æ¡ˆ</strong>çš„ä¾æ®</p>\n</li>\n<li>\n<p dir=\"auto\"><code class=\"notranslate\">éç­”é¢˜çš„è¯„è®º</code>ä¼šè¢«åˆ é™¤ï¼Œé—®é¢˜ç›¸å…³è®¨è®ºè¯·åœ¨<a href=\"https://github.com/BetaSu/fe-hunter\">èµé‡‘çŒäººç¾¤</a>ä¸­è¿›è¡Œ</p>\n</li>\n</ul>","updatedAt":"2022-04-12T02:08:58Z","upvoteCount":null,"author":{"login":"BetaSu","avatarUrl":"https://avatars.githubusercontent.com/u/15828041?u=3b08cdf9f9b49dbead9ffb020a94d925904d2b74&v=4","url":"https://github.com/BetaSu"},"category":null,"labels":{"edges":[{"node":{"name":"JS","color":"ffee58"}},{"node":{"name":"åŠ¨æ‰‹","color":"42a5f5"}}]},"comments":{"edges":[{"node":{"id":"IC_kwDOHCfdf85BHEi7","bodyHTML":"<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function deepClone(target) {\n    const map = new WeakMap()\n    \n    function isObject(target) {\n        return (typeof target === 'object' &amp;&amp; target ) || typeof target === 'function'\n    }\n\n    function clone(data) {\n        if (!isObject(data)) {\n            return data\n        }\n       if(typeof data==='symbol'){ \n            return Symbol.for(data.description);\n        }\n        if ([Date, RegExp].includes(data.constructor)) {\n            return new data.constructor(data)\n        }\n        if (typeof data === 'function') {\n            return new Function('return ' + data.toString())()\n        }\n        const exist = map.get(data)\n        if (exist) {\n            return exist\n        }\n        if (data instanceof Map) {\n            const result = new Map()\n            map.set(data, result)\n            data.forEach((val, key) =&gt; {\n                if (isObject(val)) {\n                    result.set(key, clone(val))\n                } else {\n                    result.set(key, val)\n                }\n            })\n            return result\n        }\n        if (data instanceof Set) {\n            const result = new Set()\n            map.set(data, result)\n            data.forEach(val =&gt; {\n                if (isObject(val)) {\n                    result.add(clone(val))\n                } else {\n                    result.add(val)\n                }\n            })\n            return result\n        }\n        const keys = Reflect.ownKeys(data)\n        const allDesc = Object.getOwnPropertyDescriptors(data)\n        const result = Object.create(Object.getPrototypeOf(data), allDesc)\n        map.set(data, result)\n        keys.forEach(key =&gt; {\n            const val = data[key]\n            if (isObject(val)) {\n                result[key] = clone(val)\n            } else {\n                result[key] = val\n            }\n        })\n        return result\n    }\n\n    return clone(target)\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-s1\">map</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">WeakMap</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n    \n    <span class=\"pl-k\">function</span> <span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">target</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'object'</span> <span class=\"pl-c1\">&amp;&amp;</span> <span class=\"pl-s1\">target</span> <span class=\"pl-kos\">)</span> <span class=\"pl-c1\">||</span> <span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">target</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'function'</span>\n    <span class=\"pl-kos\">}</span>\n\n    <span class=\"pl-k\">function</span> <span class=\"pl-en\">clone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-c1\">!</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">data</span>\n        <span class=\"pl-kos\">}</span>\n       <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">data</span><span class=\"pl-c1\">===</span><span class=\"pl-s\">'symbol'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span> \n            <span class=\"pl-k\">return</span> <span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">for</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">description</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-v\">Date</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">RegExp</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">includes</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">data</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'function'</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Function</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'return '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">toString</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">const</span> <span class=\"pl-s1\">exist</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">exist</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">exist</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span> <span class=\"pl-k\">instanceof</span> <span class=\"pl-v\">Map</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">const</span> <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Map</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">key</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n                    <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">clone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n                    <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span>\n                <span class=\"pl-kos\">}</span>\n            <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">result</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span> <span class=\"pl-k\">instanceof</span> <span class=\"pl-v\">Set</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">const</span> <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Set</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-s1\">data</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n                    <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">add</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">clone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n                    <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">add</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span>\n                <span class=\"pl-kos\">}</span>\n            <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">result</span>\n        <span class=\"pl-kos\">}</span>\n        <span class=\"pl-k\">const</span> <span class=\"pl-s1\">keys</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Reflect</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ownKeys</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">const</span> <span class=\"pl-s1\">allDesc</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getOwnPropertyDescriptors</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">const</span> <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getPrototypeOf</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">allDesc</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">data</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-s1\">keys</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-k\">const</span> <span class=\"pl-s1\">val</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">data</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span>\n            <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-s1\">result</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">clone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">val</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n                <span class=\"pl-s1\">result</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">val</span>\n            <span class=\"pl-kos\">}</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">result</span>\n    <span class=\"pl-kos\">}</span>\n\n    <span class=\"pl-k\">return</span> <span class=\"pl-en\">clone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>","author":{"login":"GitHdu","avatarUrl":"https://avatars.githubusercontent.com/u/15519616?u=c08f3a955452755d4fee1f5915d30d0c28d40194&v=4","url":"https://github.com/GitHdu"},"replies":null}},{"node":{"id":"IC_kwDOHCfdf85BHHBU","bodyHTML":"<h3 dir=\"auto\">åŸºç¡€ç‰ˆæœ¬</h3>\n<p dir=\"auto\">æ·±æ‹·è´çš„æ ¸å¿ƒå°±æ˜¯æµ…æ‹·è´ + é€’å½’ï¼Œå³é€šè¿‡ä¸æ–­çš„é€’å½’åˆ°è¾¾å¯¹è±¡çš„æœ€é‡Œå±‚ï¼Œå®ŒæˆåŸºæœ¬ç±»å‹å±æ€§çš„æ‹·è´ã€‚</p>\n<p dir=\"auto\">å…ˆä»æœ€åŸºç¡€çš„æ·±æ‹·è´ç‰ˆæœ¬çœ‹èµ·ï¼Œå³åªè€ƒè™‘æ•°ç»„å’Œå¯¹è±¡å­—é¢é‡çš„æƒ…å†µï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function deepClone(target){\n    if(typeof target === 'object'){\n        let cloneTarget = Array.isArray(target) ? []:{}\n        Reflect.ownKeys(target).forEach(key =&gt; {\n            cloneTarget[key] = deepClone(target[key])\n        })\n        return cloneTarget\n    } else {\n        return target\n    }\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">target</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'object'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">let</span> <span class=\"pl-s1\">cloneTarget</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Array</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">isArray</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> ? <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>:<span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n        <span class=\"pl-v\">Reflect</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ownKeys</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">cloneTarget</span>\n    <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">target</span>\n    <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">æ ¹æ®åˆå§‹ä¼ å…¥çš„ <code class=\"notranslate\">target</code> æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡è¿˜æ˜¯æ•°ç»„ï¼Œå†³å®šæœ€ç»ˆè¿”å›çš„ <code class=\"notranslate\">cloneTarget</code> æ˜¯å¯¹è±¡è¿˜æ˜¯æ•°ç»„ã€‚æ¥ç€éå† <code class=\"notranslate\">target</code> çš„æ¯ä¸€ä¸ªè‡ªèº«å¯æšä¸¾å±æ€§ï¼Œé€’å½’è°ƒç”¨ <code class=\"notranslate\">deepClone</code>ï¼Œå¦‚æœå±æ€§å·²ç»æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœè¿˜æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œå°±å’Œåˆå§‹çš„ <code class=\"notranslate\">target</code> è¿›è¡Œä¸€æ ·çš„å¤„ç†ã€‚æœ€åï¼ŒæŠŠå¤„ç†å¥½çš„ç»“æœä¸€ä¸€æ‹·è´ç»™ <code class=\"notranslate\">cloneTarget</code>ã€‚</p>\n<h3 dir=\"auto\">è§£å†³å¾ªç¯å¼•ç”¨</h3>\n<p dir=\"auto\">å¯¹äºåˆæ¬¡ä¼ å…¥çš„å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œä½¿ç”¨ä¸€ä¸ª WeakMap è®°å½•å½“å‰ç›®æ ‡å’Œæ‹·è´ç»“æœçš„æ˜ å°„å…³ç³»ï¼Œå½“æ£€æµ‹åˆ°å†æ¬¡ä¼ å…¥ç›¸åŒçš„ç›®æ ‡æ—¶ï¼Œä¸å†è¿›è¡Œé‡å¤çš„æ‹·è´ï¼Œè€Œæ˜¯ç›´æ¥ä» WeakMap ä¸­å–å‡ºå®ƒå¯¹åº”çš„æ‹·è´ç»“æœè¿”å›ã€‚</p>\n<p dir=\"auto\">æ”¹è¿›åçš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function deepClone(target,map = new WeakMap()){\n    if(typeof target === 'object'){\n        let cloneTarget = Array.isArray(target) ? []:{}\n        // å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜\n        if(map.has(target)) return map.get(target)\n        map.set(target,cloneTarget)\n        Reflect.ownKeys(target).forEach(key =&gt; {\n            cloneTarget[key] = deepClone(target[key],map)\n        })\n        return cloneTarget\n    } else {\n        return target\n    }\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">WeakMap</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">target</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'object'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">let</span> <span class=\"pl-s1\">cloneTarget</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Array</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">isArray</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> ? <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>:<span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n        <span class=\"pl-c\">// å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜</span>\n        <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">return</span> <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-v\">Reflect</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ownKeys</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">cloneTarget</span>\n    <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">target</span>\n    <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<h3 dir=\"auto\">å¤„ç†å…¶å®ƒæ•°æ®ç±»å‹</h3>\n<p dir=\"auto\">æ·±æ‹·è´å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åº”è¯¥ç†è§£ä¸ºå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å®ƒå…¶å®è¿˜åŒ…æ‹¬äº†å¾ˆå¤šç§ç±»ï¼šé™¤äº†ä¸Šé¢å·²ç»å¤„ç†çš„å¯¹è±¡å­—é¢é‡å’Œæ•°ç»„ï¼Œè¿˜æœ‰ Setã€Mapã€ç±»æ•°ç»„å¯¹è±¡ã€å‡½æ•°ã€åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ç­‰ã€‚</p>\n<h4 dir=\"auto\">1ï¼‰ç±»å‹åˆ¤æ–­å‡½æ•°</h4>\n<p dir=\"auto\">ä¸ºäº†æ›´å¥½åœ°åˆ¤æ–­æ˜¯å¼•ç”¨æ•°æ®ç±»å‹è¿˜æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code class=\"notranslate\">isObject</code> å‡½æ•°ï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function isObject(o){\n    return o !== null &amp;&amp; (typeof o === 'object' || typeof o === 'function')\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">!==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-c1\">&amp;&amp;</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'object'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'function'</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">è¿™æ ·ï¼Œæ‰€æœ‰çš„å¯¹è±¡å­—é¢é‡ã€æ•°ç»„ã€Setã€Mapã€ç±»æ•°ç»„å¯¹è±¡ã€å‡½æ•°ã€åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ç­‰ï¼Œéƒ½è§†ä¸º objectã€‚</p>\n<p dir=\"auto\">ä¸ºäº†æ›´å‡†ç¡®åœ°åˆ¤æ–­å…·ä½“æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code class=\"notranslate\">getType</code> å‡½æ•°ï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function getType(o){\n    return Object.prototype.toString.call(o).slice(8,-1)\n}\n// getType(1)      &quot;Number&quot;\n// getType(null)   &quot;Null&quot;\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">getType</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">toString</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">slice</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">8</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">-</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// getType(1)      \"Number\"</span>\n<span class=\"pl-c\">// getType(null)   \"Null\"</span></pre></div>\n<h4 dir=\"auto\">2ï¼‰åˆå§‹åŒ–å‡½æ•°</h4>\n<p dir=\"auto\">ä¹‹å‰æ·±æ‹·è´å¯¹è±¡å­—é¢é‡æˆ–è€…æ•°ç»„çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå°†æœ€ç»ˆè¿”å›çš„ç»“æœ <code class=\"notranslate\">cloneTarget</code> åˆå§‹åŒ–ä¸º <code class=\"notranslate\">[]</code> æˆ–è€… <code class=\"notranslate\">{}</code>ã€‚åŒæ ·åœ°ï¼Œå¯¹äº Setã€Map ä»¥åŠç±»æ•°ç»„å¯¹è±¡ï¼Œä¹Ÿéœ€è¦è¿›è¡Œç›¸åŒçš„æ“ä½œï¼Œæ‰€ä»¥æœ€å¥½ç”¨ä¸€ä¸ªå‡½æ•°ç»Ÿä¸€å®ç° <code class=\"notranslate\">cloneTarget</code> çš„åˆå§‹åŒ–ã€‚</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function initCloneTarget(target){\n    return new target.constructor()\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">initCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">é€šè¿‡ <code class=\"notranslate\">target.constructor</code> å¯ä»¥è·å¾—ä¼ è¿›æ¥çš„å®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œåˆ©ç”¨è¿™ä¸ªæ„é€ å‡½æ•°æ–°åˆ›å»ºä¸€ä¸ªåŒç±»å‹çš„å®ä¾‹å¹¶è¿”å›ã€‚</p>\n<h4 dir=\"auto\">3ï¼‰å¤„ç†å¯ä»¥ç»§ç»­éå†çš„å¯¹è±¡ï¼šSetã€Mapã€ç±»æ•°ç»„å¯¹è±¡</h4>\n<p dir=\"auto\">å¤„ç† Set å’Œ Map çš„æµç¨‹åŸºæœ¬å’Œå¯¹è±¡å­—é¢é‡ä»¥åŠæ•°ç»„å·®ä¸å¤šï¼Œä½†æ˜¯ä¸èƒ½é‡‡ç”¨ç›´æ¥èµ‹å€¼çš„æ–¹å¼ï¼Œè€Œè¦ä½¿ç”¨ <code class=\"notranslate\">add</code> æ–¹æ³•æˆ–è€… <code class=\"notranslate\">set</code> æ–¹æ³•ï¼Œæ‰€ä»¥ç¨å¾®æ”¹è¿›ä¸€ä¸‹ã€‚è‡³äºç±»æ•°ç»„å¯¹è±¡ï¼Œå…¶å®å’Œæ•°ç»„ä»¥åŠå¯¹è±¡å­—é¢é‡çš„å½¢å¼å·®ä¸å¤šï¼Œæ‰€ä»¥å¯ä»¥ä¸€å—å¤„ç†ã€‚</p>\n<p dir=\"auto\">ä»£ç å¦‚ä¸‹ï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function deepClone(target,map = new WeakMap()){\n    // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›å³å¯\n    if(!isObject(target))    return target   \n    \n    // åˆå§‹åŒ–è¿”å›ç»“æœ\n    let type = getType(target)\n    let cloneTarget = initCloneTarget(target)\n    \n    // å¤„ç†å¾ªç¯å¼•ç”¨\n    if(map.has(target)){\n        return map.get(target)\n    } else {\n        map.set(target,cloneTarget)\n    }   \n    \n    // å¤„ç† Set    \n    if(type === 'Set'){\n        target.forEach(value =&gt; {\n            cloneTarget.add(deepClone(value,map))\n        })\n    }\n    // å¤„ç† Map\n    else if(type === 'Map'){\n        target.forEach((value,key) =&gt; {\n            cloneTarget.set(key,deepClone(value,map))\n        })\n    }\n    \n    // å¤„ç†å¯¹è±¡å­—é¢é‡ã€æ•°ç»„ã€ç±»æ•°ç»„å¯¹è±¡\n    else if(type === 'Object' || type === 'Array' || type === 'Arguments'){\n        Reflect.ownKeys(target).forEach(key =&gt; {\n            cloneTarget[key] = deepClone(target[key],map)\n        })\n    }\n    return cloneTarget\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">WeakMap</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-c\">// å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œç›´æ¥è¿”å›å³å¯</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">!</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">target</span>   \n    \n    <span class=\"pl-c\">// åˆå§‹åŒ–è¿”å›ç»“æœ</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">getType</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">cloneTarget</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">initCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    \n    <span class=\"pl-c\">// å¤„ç†å¾ªç¯å¼•ç”¨</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>   \n    \n    <span class=\"pl-c\">// å¤„ç† Set    </span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Set'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">add</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-c\">// å¤„ç† Map</span>\n    <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Map'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">,</span><span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    \n    <span class=\"pl-c\">// å¤„ç†å¯¹è±¡å­—é¢é‡ã€æ•°ç»„ã€ç±»æ•°ç»„å¯¹è±¡</span>\n    <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Object'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Array'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Arguments'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-v\">Reflect</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ownKeys</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">cloneTarget</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<h4 dir=\"auto\">4ï¼‰å¤„ç†ä¸èƒ½ç»§ç»­éå†çš„å¯¹è±¡ï¼šå‡½æ•°ã€é”™è¯¯å¯¹è±¡ã€æ—¥æœŸå¯¹è±¡ã€æ­£åˆ™å¯¹è±¡ã€åŸºæœ¬ç±»å‹çš„åŒ…è£…å¯¹è±¡</h4>\n<p dir=\"auto\">å¯¹äºä¸Šé¢è¿™äº›å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½åƒåŸºæœ¬æ•°æ®ç±»å‹é‚£æ ·ç›´æ¥è¿”å›ï¼Œå¦åˆ™å°†è¿”å›ç›¸åŒçš„å¼•ç”¨ï¼Œå¹¶æ²¡æœ‰è¾¾åˆ°æ‹·è´çš„ç›®çš„ã€‚æ­£ç¡®çš„åšæ³•ï¼Œåº”è¯¥æ˜¯æ‹·è´ä¸€ä»½å‰¯æœ¬ï¼Œå†ç›´æ¥è¿”å›ã€‚</p>\n<p dir=\"auto\">å¦‚ä½•æ‹·è´å‘¢ï¼Ÿè¿™é‡Œåˆåˆ†ä¸ºä¸¤ç§æƒ…å†µã€‚å…¶ä¸­ï¼ŒStringã€Booleanã€Numberã€é”™è¯¯å¯¹è±¡ã€æ—¥æœŸå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡ new çš„æ–¹å¼è¿”å›ä¸€ä¸ªå®ä¾‹å‰¯æœ¬ï¼›è€Œ Symbolã€å‡½æ•°ã€æ­£åˆ™å¯¹è±¡çš„æ‹·è´åˆ™æ— æ³•é€šè¿‡ç®€å•çš„ new æ‹·è´å‰¯æœ¬ï¼Œéœ€è¦å•ç‹¬å¤„ç†ã€‚</p>\n<p dir=\"auto\"><strong>æ‹·è´ Symbol</strong></p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function cloneSymbol(target){\n    return Object(target.valueOf())    \n    // æˆ–è€…\n    return Object(Symbol.prototype.valueOf.call(target))\n    // æˆ–è€…\n    return Object(Symbol(target.description))\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneSymbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valueOf</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>    \n    <span class=\"pl-c\">// æˆ–è€…</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">valueOf</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-c\">// æˆ–è€…</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">description</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">PSï¼šè¿™é‡Œçš„ <code class=\"notranslate\">target</code> æ˜¯ Symbol åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ï¼Œè°ƒç”¨ <code class=\"notranslate\">valueOf</code> å¯ä»¥è·å¾—å®ƒå¯¹åº”çš„æ‹†ç®±ç»“æœï¼Œå†æŠŠè¿™ä¸ªæ‹†ç®±ç»“æœä¼ ç»™ Objectï¼Œå°±å¯ä»¥æ„é€ åŸåŒ…è£…ç±»å‹çš„å‰¯æœ¬äº†ï¼›ä¸ºäº†ä¿é™©èµ·è§ï¼Œå¯ä»¥é€šè¿‡ Symbol çš„åŸå‹è°ƒç”¨ <code class=\"notranslate\">valueOf</code>ï¼›å¯ä»¥é€šè¿‡ description è·å¾— symbol çš„æè¿°ç¬¦ï¼ŒåŸºäºæ­¤ä¹Ÿå¯ä»¥æ„é€ åŸåŒ…è£…ç±»å‹çš„å‰¯æœ¬ã€‚</p>\n<p dir=\"auto\"><strong>æ‹·è´æ­£åˆ™å¯¹è±¡ï¼ˆå‚è€ƒ lodash çš„åšæ³•ï¼‰</strong></p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function cloneReg(target) {\n    const reFlags = /\\w*$/;\n    const result = new RegExp(target.source, reFlags.exec(target));\n    result.lastIndex = target.lastIndex;\n    return result;\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneReg</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-s1\">reFlags</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\"><span class=\"pl-c1\">/</span><span class=\"pl-cce\">\\w</span><span class=\"pl-c1\">*</span><span class=\"pl-cce\">$</span><span class=\"pl-c1\">/</span></span><span class=\"pl-kos\">;</span>\n    <span class=\"pl-k\">const</span> <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">RegExp</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">source</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">reFlags</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exec</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n    <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">lastIndex</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">lastIndex</span><span class=\"pl-kos\">;</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\"><strong>æ‹·è´å‡½æ•°ï¼ˆå®é™…ä¸Šå‡½æ•°æ²¡æœ‰å¿…è¦æ‹·è´ï¼‰</strong></p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function cloneFunction(target){\n    return eval(`(${target})`)\n    // æˆ–è€…\n    return new Function(`return (${target})()`)\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneFunction</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-en\">eval</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">`(<span class=\"pl-s1\"><span class=\"pl-kos\">${</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">}</span></span>)`</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-c\">// æˆ–è€…</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Function</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">`return (<span class=\"pl-s1\"><span class=\"pl-kos\">${</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">}</span></span>)()`</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">PSï¼šä¼ ç»™ new Function çš„å‚æ•°å£°æ˜äº†æ–°åˆ›å»ºçš„å‡½æ•°å®ä¾‹çš„å‡½æ•°ä½“å†…å®¹</p>\n<p dir=\"auto\">æ¥ä¸‹æ¥ï¼Œç”¨ä¸€ä¸ª <code class=\"notranslate\">directCloneTarget</code> å‡½æ•°å¤„ç†ä»¥ä¸Šæ‰€æœ‰æƒ…å†µï¼š</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"function directCloneTarget(target,type){\n    let _constructor = target.constructor\n\tswitch(type){\n        case 'String':\n        case 'Boolean':\n        case 'Number':\n        case 'Error':\n        case 'Date':\n        \treturn new _constructor(target.valueOf())\n            // æˆ–è€…\n            return new Object(target.valueOf())\n            // æˆ–è€…\n            return new Object(_constructor.prototype.valueOf.call(target))\n        case 'RegExp':\n            return cloneReg(target)        \n        case 'Symbol':\n            return cloneSymbol(target)        \n        case 'Function':            \n            return cloneFunction(target) \n        default:            \n            return null    \n    }            \n}\"><pre class=\"notranslate\"><span class=\"pl-k\">function</span> <span class=\"pl-en\">directCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">_constructor</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span>\n\t<span class=\"pl-k\">switch</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'String'</span>:\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Boolean'</span>:\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Number'</span>:\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Error'</span>:\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Date'</span>:\n        \t<span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">_constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valueOf</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-c\">// æˆ–è€…</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valueOf</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-c\">// æˆ–è€…</span>\n            <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">_constructor</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">valueOf</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'RegExp'</span>:\n            <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneReg</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>        \n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Symbol'</span>:\n            <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneSymbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>        \n        <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Function'</span>:            \n            <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneFunction</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> \n        <span class=\"pl-k\">default</span>:            \n            <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>    \n    <span class=\"pl-kos\">}</span>            \n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">PSï¼šæ³¨æ„è¿™é‡Œæœ‰ä¸€äº›å‘ã€‚</p>\n<ul dir=\"auto\">\n<li>ä¸ºä»€ä¹ˆä½¿ç”¨ <code class=\"notranslate\">return new _constructor(target.valueOf())</code> è€Œä¸æ˜¯ <code class=\"notranslate\">return new _constructor(target)</code> å‘¢ï¼Ÿå› ä¸ºå¦‚æœä¼ è¿›æ¥çš„ <code class=\"notranslate\">target</code> æ˜¯ <code class=\"notranslate\">new Boolean(false)</code>ï¼Œé‚£ä¹ˆæœ€ç»ˆè¿”å›çš„å®é™…ä¸Šæ˜¯ <code class=\"notranslate\">new Boolean(new Boolean(false))</code> ï¼Œç”±äºå‚æ•°å¹¶éç©ºå¯¹è±¡ï¼Œå› æ­¤å®ƒçš„å€¼å¯¹åº”çš„ä¸æ˜¯æœŸæœ›çš„ falseï¼Œè€Œæ˜¯ trueã€‚æ‰€ä»¥ï¼Œæœ€å¥½ä½¿ç”¨ <code class=\"notranslate\">valueOf</code> è·å¾—åŒ…è£…ç±»å‹å¯¹åº”çš„çœŸå®å€¼ã€‚</li>\n<li>ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨åŸºæœ¬ç±»å‹å¯¹åº”çš„æ„é€ å‡½æ•° <code class=\"notranslate\">_constructor</code>ï¼Œè€Œæ˜¯ç›´æ¥ <code class=\"notranslate\">new Object(target.valueOf())</code> å¯¹åŸºæœ¬ç±»å‹è¿›è¡ŒåŒ…è£…</li>\n<li>è€ƒè™‘åˆ° valueOf å¯èƒ½è¢«é‡å†™ï¼Œä¸ºäº†ä¿é™©èµ·è§ï¼Œå¯ä»¥é€šè¿‡åŸºæœ¬ç±»å‹å¯¹åº”çš„æ„é€ å‡½æ•° <code class=\"notranslate\">_constructor</code> å»è°ƒç”¨ valueOf æ–¹æ³•</li>\n</ul>\n<h3 dir=\"auto\">æœ€ç»ˆç‰ˆæœ¬</h3>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// å¯ä»¥ç»§ç»­éå†çš„ç±»å‹\nconst objectToInit = ['Object','Array','Set','Map','Arguments']\n\n// åˆ¤æ–­æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹\nfunction isObject(o){\n  return o !== null &amp;&amp; (typeof o === 'object' || typeof o === 'function')\n}\n// åˆ¤æ–­å…·ä½“çš„æ•°æ®ç±»å‹\nfunction getType(o){\n  return Object.prototype.toString.call(o).slice(8,-1)\n}\n// åˆå§‹åŒ–å‡½æ•°\nfunction initCloneTarget(target){\n  return new target.constructor()\n}\n// æ‹·è´ Symbol\nfunction cloneSymbol(target){\n\treturn Object(target.valueOf())    \n    // æˆ–è€…\n    return Object(Symbol.prototype.valueOf.call(target))\n    // æˆ–è€…\n    return Object(Symbol(target.description))\n}\n// æ‹·è´æ­£åˆ™å¯¹è±¡\nfunction cloneReg(target) {\n  const reFlags = /\\w*$/;\n  const result = new RegExp(target.source, reFlags.exec(target));\n  result.lastIndex = target.lastIndex;\n  return result;\n}\n// æ‹·è´å‡½æ•°\nfunction cloneFunction(target){\n  return eval(`(${target})`)\n  // æˆ–è€…\n  return new Function(`return (${target})()`)\n}\n\n// å¤„ç†ä¸èƒ½ç»§ç»­éå†çš„ç±»å‹\nfunction directCloneTarget(target,type){\n  let _constructor = target.constructor\n  switch(type){\n    case 'String':\n    case 'Boolean':\n    case 'Number':\n    case 'Error':\n    case 'Date':\n      return new _constructor(target.valueOf())\n      // æˆ–è€…\n      return new Object(_constructor.prototype.valueOf.call(target))\n    case 'RegExp':\n        return cloneReg(target)        \n    case 'Symbol':\n        return cloneSymbol(target)        \n    case 'Function':            \n        return cloneFunction(target) \n    default:            \n        return null    \n  }        \n}\n\n\n// æ·±æ‹·è´çš„æ ¸å¿ƒä»£ç \nfunction deepClone(target,map = new WeakMap()){\n    if(!isObject(target))    return target    \n    // åˆå§‹åŒ–\n    let type = getType(target)\n    let cloneTarget\n    if(objectToInit.includes(type)){\n        cloneTarget = initCloneTarget(target)\n    } else {\n        return directCloneTarget(target,type)\n    }\n \t// è§£å†³å¾ªç¯å¼•ç”¨   \n    if(map.has(target))       return map.get(target)\n    map.set(target,cloneTarget)\n    // æ‹·è´ Set\n    if(type === 'Set'){\n        target.forEach(value =&gt; {\n            cloneTarget.add(deepClone(value,map))\n        })\n    }\n    // æ‹·è´ Map\n    else if(type === 'Map'){\n        target.forEach((value,key) =&gt; {\n            cloneTarget.set(key,deepClone(value,map))\n        })\n    }\n    // æ‹·è´å¯¹è±¡å­—é¢é‡ã€æ•°ç»„ã€ç±»æ•°ç»„å¯¹è±¡\n    else if(type === 'Object' || type === 'Array' || type === 'Arguments'){\n        Reflect.ownKeys(target).forEach(key =&gt; {\n            cloneTarget[key] = deepClone(target[key],map)\n        })\n    }\n    return cloneTarget\n}\"><pre class=\"notranslate\"><span class=\"pl-c\">// å¯ä»¥ç»§ç»­éå†çš„ç±»å‹</span>\n<span class=\"pl-k\">const</span> <span class=\"pl-s1\">objectToInit</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">'Object'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'Array'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'Set'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'Map'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'Arguments'</span><span class=\"pl-kos\">]</span>\n\n<span class=\"pl-c\">// åˆ¤æ–­æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">!==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-c1\">&amp;&amp;</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'object'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">o</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'function'</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// åˆ¤æ–­å…·ä½“çš„æ•°æ®ç±»å‹</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">getType</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">toString</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">o</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">slice</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">8</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">-</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// åˆå§‹åŒ–å‡½æ•°</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">initCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// æ‹·è´ Symbol</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneSymbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n\t<span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valueOf</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>    \n    <span class=\"pl-c\">// æˆ–è€…</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">valueOf</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-c\">// æˆ–è€…</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">description</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// æ‹·è´æ­£åˆ™å¯¹è±¡</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneReg</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">reFlags</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\"><span class=\"pl-c1\">/</span><span class=\"pl-cce\">\\w</span><span class=\"pl-c1\">*</span><span class=\"pl-cce\">$</span><span class=\"pl-c1\">/</span></span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">RegExp</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">source</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">reFlags</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exec</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">lastIndex</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">lastIndex</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// æ‹·è´å‡½æ•°</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">cloneFunction</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-en\">eval</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">`(<span class=\"pl-s1\"><span class=\"pl-kos\">${</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">}</span></span>)`</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-c\">// æˆ–è€…</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Function</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">`return (<span class=\"pl-s1\"><span class=\"pl-kos\">${</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">}</span></span>)()`</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span>\n\n<span class=\"pl-c\">// å¤„ç†ä¸èƒ½ç»§ç»­éå†çš„ç±»å‹</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">directCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">let</span> <span class=\"pl-s1\">_constructor</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span>\n  <span class=\"pl-k\">switch</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'String'</span>:\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Boolean'</span>:\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Number'</span>:\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Error'</span>:\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Date'</span>:\n      <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">_constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valueOf</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-c\">// æˆ–è€…</span>\n      <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">_constructor</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">prototype</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">valueOf</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'RegExp'</span>:\n        <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneReg</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>        \n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Symbol'</span>:\n        <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneSymbol</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>        \n    <span class=\"pl-k\">case</span> <span class=\"pl-s\">'Function'</span>:            \n        <span class=\"pl-k\">return</span> <span class=\"pl-en\">cloneFunction</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span> \n    <span class=\"pl-k\">default</span>:            \n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>    \n  <span class=\"pl-kos\">}</span>        \n<span class=\"pl-kos\">}</span>\n\n\n<span class=\"pl-c\">// æ·±æ‹·è´çš„æ ¸å¿ƒä»£ç </span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">WeakMap</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">!</span><span class=\"pl-en\">isObject</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">target</span>    \n    <span class=\"pl-c\">// åˆå§‹åŒ–</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">getType</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">cloneTarget</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">objectToInit</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">includes</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">cloneTarget</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">initCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span> <span class=\"pl-k\">else</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-en\">directCloneTarget</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">type</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n \t<span class=\"pl-c\">// è§£å†³å¾ªç¯å¼•ç”¨   </span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>       <span class=\"pl-k\">return</span> <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-c\">// æ‹·è´ Set</span>\n    <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Set'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">add</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-c\">// æ‹·è´ Map</span>\n    <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Map'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-s1\">target</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">,</span><span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-c\">// æ‹·è´å¯¹è±¡å­—é¢é‡ã€æ•°ç»„ã€ç±»æ•°ç»„å¯¹è±¡</span>\n    <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Object'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Array'</span> <span class=\"pl-c1\">||</span> <span class=\"pl-s1\">type</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s\">'Arguments'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n        <span class=\"pl-v\">Reflect</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ownKeys</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">forEach</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n            <span class=\"pl-s1\">cloneTarget</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">target</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span><span class=\"pl-s1\">map</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">cloneTarget</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<h3 dir=\"auto\">æµ‹è¯•ç”¨ä¾‹</h3>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"let obj = {\n  name: 'å°æ˜',\n  age: 24,\n  male: true,\n  birthday: new Date('1998-04-21'),\n  skills: ['å”±','è·³','rap','ç¯®çƒ'],\n  classmate: [\n    {\n      name: 'å°çº¢',\n      age: 24\n    },\n    {\n      name: 'å°å¼ ',\n      age: 24\n    },\n  ],\n  map: new Map([['a', 1,'b',2]]),\n  set: new Set([1,2,3,4,5]),\n  getName: function(){\n    console.log(`åå­—æ˜¯${this.name}`)\n  },\n  reg : /\\d+/gi,\n  error : new Error(),\n  a: undefined,\n  b: Symbol(),\n  [Symbol()]: 123,\n  c:NaN,\n  d:Infinity,\n  e:-Infinity,\n}\nobj.f = obj\nlet cloneObj = deepClone(obj)\n\nobj.age = 100\nobj.classmate[1].age = 100\nobj.set.add('1123')\nobj.skills.push('è®¡ç®—æœº')\nobj.name = 'å°æ¢…'\nobj.map.set('name', 'å°æ˜')\n\nconsole.log(obj)\nconsole.log(cloneObj)\nobj.getName()\ncloneObj.getName()\"><pre class=\"notranslate\"><span class=\"pl-k\">let</span> <span class=\"pl-s1\">obj</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-c1\">name</span>: <span class=\"pl-s\">'å°æ˜'</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">age</span>: <span class=\"pl-c1\">24</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">male</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">birthday</span>: <span class=\"pl-k\">new</span> <span class=\"pl-v\">Date</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'1998-04-21'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">skills</span>: <span class=\"pl-kos\">[</span><span class=\"pl-s\">'å”±'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'è·³'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'rap'</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'ç¯®çƒ'</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">classmate</span>: <span class=\"pl-kos\">[</span>\n    <span class=\"pl-kos\">{</span>\n      <span class=\"pl-c1\">name</span>: <span class=\"pl-s\">'å°çº¢'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-c1\">age</span>: <span class=\"pl-c1\">24</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-kos\">{</span>\n      <span class=\"pl-c1\">name</span>: <span class=\"pl-s\">'å°å¼ '</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-c1\">age</span>: <span class=\"pl-c1\">24</span>\n    <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">map</span>: <span class=\"pl-k\">new</span> <span class=\"pl-v\">Map</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-kos\">[</span><span class=\"pl-s\">'a'</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span><span class=\"pl-s\">'b'</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">2</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">set</span>: <span class=\"pl-k\">new</span> <span class=\"pl-v\">Set</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">4</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">5</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-en\">getName</span>: <span class=\"pl-k\">function</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">{</span>\n    <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">`åå­—æ˜¯<span class=\"pl-s1\"><span class=\"pl-kos\">${</span><span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">name</span><span class=\"pl-kos\">}</span></span>`</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">reg</span> : <span class=\"pl-pds\"><span class=\"pl-c1\">/</span><span class=\"pl-cce\">\\d</span><span class=\"pl-c1\">+</span><span class=\"pl-c1\">/</span>gi</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">error</span> : <span class=\"pl-k\">new</span> <span class=\"pl-v\">Error</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">a</span>: <span class=\"pl-c1\">undefined</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">b</span>: <span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">[</span><span class=\"pl-v\">Symbol</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">]</span>: <span class=\"pl-c1\">123</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">c</span>:<span class=\"pl-v\">NaN</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">d</span>:<span class=\"pl-v\">Infinity</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">e</span>:<span class=\"pl-c1\">-</span><span class=\"pl-v\">Infinity</span><span class=\"pl-kos\">,</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">f</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">obj</span>\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">cloneObj</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">age</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">100</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">classmate</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">age</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">100</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">set</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">add</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'1123'</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">skills</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">push</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'è®¡ç®—æœº'</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">name</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'å°æ¢…'</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">map</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'name'</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">'å°æ˜'</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">cloneObj</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">obj</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getName</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">cloneObj</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getName</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">ç»è¿‡æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š<br>\n1ï¼‰ä¿®æ”¹åŸå¯¹è±¡çš„ä»»æ„å±æ€§ï¼Œæ‹·è´å¯¹è±¡ä¸å—å½±å“ï¼Œåä¹‹äº¦ç„¶ã€‚ç¬¦åˆæ·±æ‹·è´çš„å®šä¹‰<br>\n2ï¼‰æ”¯æŒæ‹·è´å¦‚ä¸‹æ•°æ®ç»“æ„ï¼š<code class=\"notranslate\">Date</code>ã€<code class=\"notranslate\">Symbol</code>ã€<code class=\"notranslate\">Function</code>ã€<code class=\"notranslate\">RegExp</code> ç­‰<br>\n3ï¼‰ç¯çŠ¶å¼•ç”¨ä¸ä¼šæŠ¥é”™<br>\n4ï¼‰Date ç±»å‹çš„å±æ€§åœ¨æ·±æ‹·è´ä¹‹åä¸ä¼šå˜æˆå­—ç¬¦ä¸²ï¼ˆ<code class=\"notranslate\">JSON.parse(JSON.stringify(obj))</code> æ·±æ‹·è´å­˜åœ¨çš„é—®é¢˜ï¼‰<br>\n5ï¼‰å¯¹è±¡å±æ€§å€¼æ˜¯ <code class=\"notranslate\">RegExp</code> ç±»å‹æˆ–è€… <code class=\"notranslate\">Error</code> ç±»å‹çš„æ—¶å€™ï¼Œæ·±æ‹·è´ä¹‹åä¸ä¼šå˜æˆç©ºå¯¹è±¡ï¼ˆ<code class=\"notranslate\">JSON.parse(JSON.stringify(obj))</code> æ·±æ‹·è´å­˜åœ¨çš„é—®é¢˜ï¼‰<br>\n6ï¼‰å¯¹è±¡å±æ€§å€¼æ˜¯å‡½æ•°ç±»å‹ã€ <code class=\"notranslate\">undefined</code> ç±»å‹ã€<code class=\"notranslate\">Symbol</code> ç±»å‹çš„æ—¶å€™ï¼Œæ·±æ‹·è´ä¹‹åä¸ä¼šä¸¢å¤±ï¼ˆ<code class=\"notranslate\">JSON.parse(JSON.stringify(obj))</code> æ·±æ‹·è´å­˜åœ¨çš„é—®é¢˜ï¼‰<br>\n7ï¼‰å¯¹è±¡çš„å±æ€§ï¼ˆkeyï¼‰æ˜¯ <code class=\"notranslate\">Symbol</code> ç±»å‹çš„æ—¶å€™ï¼Œæ·±æ‹·è´ä¹‹åä¸ä¼šä¸¢å¤±ï¼ˆ<code class=\"notranslate\">JSON.parse(JSON.stringify(obj))</code> æ·±æ‹·è´å­˜åœ¨çš„é—®é¢˜ï¼‰<br>\n8ï¼‰å¯¹è±¡çš„å±æ€§å€¼æ˜¯ <code class=\"notranslate\">NaN</code>ã€<code class=\"notranslate\">Infinity</code>ã€<code class=\"notranslate\">-Infinity</code> çš„æ—¶å€™ï¼Œæ·±æ‹·è´ä¹‹åä¸ä¼šå˜æˆ nullï¼ˆ<code class=\"notranslate\">JSON.parse(JSON.stringify(obj))</code> æ·±æ‹·è´å­˜åœ¨çš„é—®é¢˜ï¼‰</p>","author":{"login":"Chorer","avatarUrl":"https://avatars.githubusercontent.com/u/43442630?u=a9fa211751f51a129ea1fdd6ebaaa8ab41edb62a&v=4","url":"https://github.com/Chorer"},"replies":null}},{"node":{"id":"IC_kwDOHCfdf85BHIR3","bodyHTML":"<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/**\n * @param {object} origin æºå¯¹è±¡\n * @return {object} æ‹·è´åçš„å¯¹è±¡\n */\n// åˆ©ç”¨ WeakMap è§£å†³å¯¹è±¡ç›¸äº’å¼•ç”¨çš„é—®é¢˜\nfunction deepClone(origin, hashMap = new WeakMap()) {\n  if (origin == undefined || typeof origin !== 'object') return origin\n\n  if (origin instanceof Date) return new Date(origin)\n  if (origin instanceof RegExp) return new RegExp(origin)\n\n  // è‹¥ä¹‹å‰å·²ç»å¤„ç†è¿‡å½“å‰æºå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å› WeakMap ä¸­ä¿å­˜çš„ç›®æ ‡å¯¹è±¡\n  const hashValue = hashMap.get(origin)\n  if (hashValue) return hashValue\n\n  // åˆ©ç”¨æºå¯¹è±¡çš„æ„é€ å™¨åˆ›å»ºç›®æ ‡å¯¹è±¡\n  const target = new origin.constructor()\n  // å°† {æºå¯¹è±¡: ç›®æ ‡å¯¹è±¡} ä¿å­˜åˆ° WeakMap ä¸­\n  hashMap.set(origin, target)\n\n  for (let key in origin) {\n    if (origin.hasOwnProperty(key))\n      target[key] = deepClone(origin[key], hashMap)\n  }\n\n  return target\n}\n\nconst obj = {\n  a: 1,\n  b: 2,\n  c: {\n    d: 3,\n    e: 4\n  }\n}\n\nconst newObj = deepClone(obj)\nnewObj.c.d = 4\n\nconsole.log(obj)\nconsole.log(newObj)\n\nlet obj1 = {}\nlet obj2 = {}\nobj2.obj1 = obj1\nobj1.obj2 = obj2\n\nconsole.log(deepClone(obj2))\"><pre class=\"notranslate\"><span class=\"pl-c\">/**</span>\n<span class=\"pl-c\"> * <span class=\"pl-k\">@param</span> {<span class=\"pl-smi\">object</span>} origin æºå¯¹è±¡</span>\n<span class=\"pl-c\"> * <span class=\"pl-k\">@return</span> {<span class=\"pl-smi\">object</span>} æ‹·è´åçš„å¯¹è±¡</span>\n<span class=\"pl-c\"> */</span>\n<span class=\"pl-c\">// åˆ©ç”¨ WeakMap è§£å†³å¯¹è±¡ç›¸äº’å¼•ç”¨çš„é—®é¢˜</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">hashMap</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">WeakMap</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span> <span class=\"pl-c1\">==</span> <span class=\"pl-c1\">undefined</span> <span class=\"pl-c1\">||</span> <span class=\"pl-k\">typeof</span> <span class=\"pl-s1\">origin</span> <span class=\"pl-c1\">!==</span> <span class=\"pl-s\">'object'</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">return</span> <span class=\"pl-s1\">origin</span>\n\n  <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span> <span class=\"pl-k\">instanceof</span> <span class=\"pl-v\">Date</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">Date</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span> <span class=\"pl-k\">instanceof</span> <span class=\"pl-v\">RegExp</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">RegExp</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-c\">// è‹¥ä¹‹å‰å·²ç»å¤„ç†è¿‡å½“å‰æºå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å› WeakMap ä¸­ä¿å­˜çš„ç›®æ ‡å¯¹è±¡</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">hashValue</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">hashMap</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">get</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">hashValue</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">return</span> <span class=\"pl-s1\">hashValue</span>\n\n  <span class=\"pl-c\">// åˆ©ç”¨æºå¯¹è±¡çš„æ„é€ å™¨åˆ›å»ºç›®æ ‡å¯¹è±¡</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">target</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-s1\">origin</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-c\">// å°† {æºå¯¹è±¡: ç›®æ ‡å¯¹è±¡} ä¿å­˜åˆ° WeakMap ä¸­</span>\n  <span class=\"pl-s1\">hashMap</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">target</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-k\">for</span> <span class=\"pl-kos\">(</span><span class=\"pl-k\">let</span> <span class=\"pl-s1\">key</span> <span class=\"pl-k\">in</span> <span class=\"pl-s1\">origin</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hasOwnProperty</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-s1\">target</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">origin</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">hashMap</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-k\">return</span> <span class=\"pl-s1\">target</span>\n<span class=\"pl-kos\">}</span>\n\n<span class=\"pl-k\">const</span> <span class=\"pl-s1\">obj</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-c1\">a</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">b</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-c1\">c</span>: <span class=\"pl-kos\">{</span>\n    <span class=\"pl-c1\">d</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-c1\">e</span>: <span class=\"pl-c1\">4</span>\n  <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span>\n\n<span class=\"pl-k\">const</span> <span class=\"pl-s1\">newObj</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">newObj</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">c</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">d</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">4</span>\n\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">newObj</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">obj1</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">obj2</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-s1\">obj2</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">obj1</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">obj1</span>\n<span class=\"pl-s1\">obj1</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">obj2</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">obj2</span>\n\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj2</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span></pre></div>","author":{"login":"Stan9726","avatarUrl":"https://avatars.githubusercontent.com/u/56797239?u=0c3a8acf568a72651a0733f358294a8514a1a0c4&v=4","url":"https://github.com/Stan9726"},"replies":null}},{"node":{"id":"IC_kwDOHCfdf85BLeiH","bodyHTML":"<h2 dir=\"auto\">å¡«è¡¥ä¸€ä¸ªä»¥ä¸Šæ–‡ç« æœªæåˆ°ï¼Œä½†ååˆ†ç®€æ´çš„ä¸€ä¸ªå†™æ³•</h2>\n<p dir=\"auto\">//  ä½¿ç”¨å±æ€§æè¿°çš„è·å–ä¸è®¾ç½®æ–¹æ³•ï¼Œå¯ä»¥ä¸€è¡Œä»£ç æ·±æ‹·è´ï¼Œä¸ä»…å¯ä»¥æ‹·è´åµŒå¥—å¯¹è±¡å’Œå‡½æ•°ç­‰ï¼Œè¿˜ä¼šè¿å¸¦æ‹·è´å±æ€§çš„ç‰¹æ€§<br>\n//ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼ŒåŸå¯¹è±¡ä¸­ ä¸å¯è¿­ä»£ æˆ– symbolç±»å‹ çš„å±æ€§ä¹Ÿä¼šè¢«æ‹·è´è¿‡æ¥ï¼Œè€Œä¸”åŸå¯¹è±¡å±æ€§configurableä¸ºfalseçš„è¯ä¹Ÿä¼šè¢«æ‹·è¿‡æ¥<br>\n/<em>------------------------------------------------------------------------</em>/</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/**\n * @param {object} obj éœ€è¦æ‹·è´çš„å¯¹è±¡\n * @returns {object} æ‹·è´åçš„å¯¹è±¡\n */\nfunction deepClone(obj) {\n  return Object.defineProperties({}, Object.getOwnPropertyDescriptors(obj));\n}\"><pre class=\"notranslate\"><span class=\"pl-c\">/**</span>\n<span class=\"pl-c\"> * <span class=\"pl-k\">@param</span> {<span class=\"pl-smi\">object</span>} obj éœ€è¦æ‹·è´çš„å¯¹è±¡</span>\n<span class=\"pl-c\"> * <span class=\"pl-k\">@returns</span> {<span class=\"pl-smi\">object</span>} æ‹·è´åçš„å¯¹è±¡</span>\n<span class=\"pl-c\"> */</span>\n<span class=\"pl-k\">function</span> <span class=\"pl-en\">deepClone</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">return</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">defineProperties</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Object</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getOwnPropertyDescriptors</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">obj</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-kos\">}</span></pre></div>","author":{"login":"bullshitking-99","avatarUrl":"https://avatars.githubusercontent.com/u/54534544?u=ed64160526166188e37bcde33c63c8017ad9109b&v=4","url":"https://github.com/bullshitking-99"},"replies":null}},{"node":{"id":"IC_kwDOHCfdf85BQXcL","bodyHTML":"<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"function deepClone(obj, hash = new WeakMap()) {\n    if (hash.has(obj)) {\n        return obj;\n    }\n    let res = null;\n    const reference = [Date, RegExp, Set, WeakSet, Map, WeakMap, Error];\n\n    if (reference.includes(obj?.constructor)) {\n        res = new obj.constructor(obj);\n    } else if (Array.isArray(obj)) {\n        res = [];\n        obj.forEach((e, i) =&gt; {\n            res[i] = deepClone(e);\n        });\n    } else if (typeof obj === &quot;object&quot; &amp;&amp; obj !== null) {\n        res = {};\n        for (const key in obj) {\n            if (Object.hasOwnProperty.call(obj, key)) {\n                res[key] = deepClone(obj[key]);\n            }\n        }\n        hash.set(obj, res);\n    } else {\n        res = obj;\n    }\n    return res;\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">function deepClone(obj, hash = new WeakMap()) {\n    if (hash.has(obj)) {\n        return obj;\n    }\n    let res = null;\n    const reference = [Date, RegExp, Set, WeakSet, Map, WeakMap, Error];\n\n    if (reference.includes(obj?.constructor)) {\n        res = new obj.constructor(obj);\n    } else if (Array.isArray(obj)) {\n        res = [];\n        obj.forEach((e, i) =&gt; {\n            res[i] = deepClone(e);\n        });\n    } else if (typeof obj === \"object\" &amp;&amp; obj !== null) {\n        res = {};\n        for (const key in obj) {\n            if (Object.hasOwnProperty.call(obj, key)) {\n                res[key] = deepClone(obj[key]);\n            }\n        }\n        hash.set(obj, res);\n    } else {\n        res = obj;\n    }\n    return res;\n}\n</code></pre></div>","author":{"login":"Garker","avatarUrl":"https://avatars.githubusercontent.com/u/56073411?u=decbf1c63ddf11fd167eb823969f38b980307f2d&v=4","url":"https://github.com/Garker"},"replies":null}},{"node":{"id":"IC_kwDOHCfdf85BRVaB","bodyHTML":"<p dir=\"auto\">Web API æ–°å¢äº†ä¸€ä¸ªæ·±æ‹·è´æ–¹æ³• <strong>structuredClone</strong><br>\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/structuredClone</a></p>","author":{"login":"molvqingtai","avatarUrl":"https://avatars.githubusercontent.com/u/26295698?u=1d19b6ca712c2b3e1eedeb3e9fb7cc26c66de6d1&v=4","url":"https://github.com/molvqingtai"},"replies":null}}]}}},"pageContext":{"number":53,"previous":{"title":"å®ç°å­—ç¬¦ä¸²reverseæ–¹æ³•","number":49},"next":{"title":"ä¸ºä»€ä¹ˆMochaç­‰æµ‹è¯•åº“çš„describeå’Œitå‡½æ•°æ²¡æœ‰å¯¼å…¥å´å¯ä»¥ä½¿ç”¨ï¼Ÿ","number":68}}},
    "staticQueryHashes": ["151096407","2861350382"]}